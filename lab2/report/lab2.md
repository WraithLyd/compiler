### 1 函数式符号表设计

- 每个作用域使用 `SymbolTable` 单独构建，形成作用域链
- 支持作用域的“不可变快照式”管理，便于嵌套语法处理和调试
- `SymbolPtr` 中记录 `depth` 可精确标记符号定义层级
    
### 2 全覆盖的类型系统检查

- 类型统一封装为 `TypePtr`，支持 `PrimitiveType` 与 `ArrayType` 多维嵌套
- 自动推导数组访问后剩余维度的类型（如 `int[2][3] -> int[3] -> int`）
- `FuncDef` 检查参数类型匹配，`FuncCall` 检查调用合法性
    

### 3 语义检查细节完整，错误提示精确

- 使用 `ASSERT(false, "...")` 统一输出错误，支持 `lineno` 精确定位
- 对如下语义错误均可检测并提示：
    - 变量重定义
    - 使用未声明变量
    - 赋值类型不匹配
    - 函数重定义
    - 数组维度初始化不匹配
### 4 AST 与语法分析器深度集成

- 语法分析中采用 `shared_ptr<AST::Node>` 构建整棵抽象语法树
    
- 各类 `Node` 节点均支持 `get_children()` + `to_string()` 输出，便于调试与可视化
    
- 初始化支持递归嵌套，如：
```
int a[2][2] = {{1, 2}, {3, 4}};
```